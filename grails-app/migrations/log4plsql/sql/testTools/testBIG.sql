/*

Objectif : test the limit off length log message => 2 000 caracteres

*/

exec PLOG.PURGE;
SET SERVEROUTPUT ON SIZE 1000000


declare
    pCTX PLOGPARAM.LOG_CTX := PLOG.init (pSECTION     => NULL, 
                                    pLEVEL       => PLOG.LDEBUG, 
                                    pLOG4J       => TRUE, 
                                    pLOGTABLE    => TRUE, 
                                    pOUT_TRANS   => TRUE, 
                                    pALERT       => TRUE, 
                                    pTRACE       => TRUE,
                                    pDBMS_OUTPUT => TRUE );
    big varchar2(4000);
begin
     for i in 1..1996 loop
       big := '-' || big;
     end loop;
     big := big || 'END>deleted by plog';
     PLOG.debug (pCTX, 'size of big:' || length(big));
     PLOG.debug (pCTX, big);
end;
/

select id, length(ltext) from tlog
/
select * from vlog
/

/*

SQL> exec PLOG.PURGE;

Procédure PL/SQL terminée avec succès.

SQL> SET SERVEROUTPUT ON SIZE 1000000
SQL> 
SQL> 
SQL> declare
  2      pCTX PLOG.LOG_CTX := PLOG.init (pSECTION     => NULL, 
  3                                      pLEVEL       => PLOG.LDEBUG, 
  4                                      pLOG4J       => TRUE, 
  5                                      pLOGTABLE    => TRUE, 
  6                                      pOUT_TRANS   => TRUE, 
  7                                      pALERT       => TRUE, 
  8                                      pTRACE       => TRUE,
  9                                      pDBMS_OUTPUT => TRUE );
 10      big varchar2(4000);
 11  begin
 12       for i in 1..1996 loop
 13         big := '-' || big;
 14       end loop;
 15       big := big || 'END>deleted by plog';
 16       PLOG.debug (pCTX, 'size of big:' || length(big));
 17       PLOG.debug (pCTX, big);
 18  end;
 19  /
00:48:54:51-DEBUG-block
size of big:2015
00:48:55:68-DEBUG-block
AAS-20000: Log Message id:309 too long.
00:48:55:66-DEBUG-block
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
---------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
---------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
---------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
---------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
---------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
---------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
---------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
----------------------------------------------------END>

Procédure PL/SQL terminée avec succès.

SQL> 
SQL> select id, length(ltext) from tlog
  2  /

        ID LENGTH(LTEXT)
---------- --------------
       307             14
       308             16
       310             40
       309           2000

SQL> select * from vlog
  2  /

LOG
--------------------------------------------------------------------------------
[Aou 23, 00:48:53:64][OFF][SCOTT][plog.purge][Purge By SCOTT]
[Aou 23, 00:48:54:51][DEBUG][SCOTT][block][size of big:2015]
[Aou 23, 00:48:55:66][DEBUG][SCOTT][block][-------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------

LOG
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------

LOG
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
---------------------------------------END>]

[Aou 23, 00:48:55:68][ERROR][SCOTT][block][AAS-20000: Log Message id:309 too lon
g. ]


SQL> 

*/

